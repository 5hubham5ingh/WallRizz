import { ansi } from "../../justjs/ansiStyle.js";
import { ProcessSync } from "../../qjs-ext-lib/src/process.js";
import * as os from "os";

const colors = {
  "663097618375.jpg": [
    "#0C101A",
    "#131A2A",
    "#1A2336",
    "#1F2E4A",
    "#282430",
    "#2A3550",
    "#374666",
    "#3F5181",
    "#513235",
    "#545573",
    "#64678A",
    "#966477",
    "#9A6F8A",
    "#D37885",
    "#D77170",
    "#E99072",
  ],
  "663097618354.webp": [
    "#0B0A14",
    "#0E1A2A",
    "#112735",
    "#233647",
    "#2D1E27",
    "#2E192A",
    "#2F4B50",
    "#545757",
    "#5B212D",
    "#5E3247",
    "#9B2830",
    "#9D3548",
    "#B3AB9C",
    "#CC4641",
    "#E75D55",
    "#F5A263",
  ],
  "663097736695.webp": [
    "#0F172A",
    "#173046",
    "#1D1B29",
    "#32364D",
    "#3E4353",
    "#51384B",
    "#58292D",
    "#596D94",
    "#614C5D",
    "#837E9E",
    "#A35657",
    "#BF5033",
    "#DA6A4F",
    "#E7C1A4",
    "#F29C56",
    "#F4A84B",
  ],
  "663097618369.jpeg": [
    "#030513",
    "#04132D",
    "#062E4D",
    "#082736",
    "#0E2E54",
    "#204F60",
    "#2A6B92",
    "#2A292A",
    "#514330",
    "#558EA5",
    "#5C625B",
    "#6E8E64",
    "#917889",
    "#9C6950",
    "#A19C62",
    "#D0BEAB",
  ],
  "663097618372.jpeg": [
    "#061212",
    "#0B2E30",
    "#0F3B43",
    "#134D4B",
    "#142721",
    "#224B36",
    "#2A554B",
    "#2E6C5C",
    "#3F8569",
    "#4E7052",
    "#52542E",
    "#619369",
    "#66A285",
    "#90A96E",
    "#90AC7E",
    "#B0A448",
  ],
  "663097618370.jpeg": [
    "#020609",
    "#132E2A",
    "#152C27",
    "#234027",
    "#2B4639",
    "#31473F",
    "#355146",
    "#4D6956",
    "#56715E",
    "#628166",
    "#728E73",
    "#7E9980",
    "#839E7D",
    "#94AA8A",
    "#A3B795",
    "#B0C19D",
  ],
  "663097375123.webp": [
    "#03100D",
    "#05261C",
    "#062E31",
    "#0B3D44",
    "#12502D",
    "#165E5B",
    "#227985",
    "#31916F",
    "#328E93",
    "#437E84",
    "#54A99D",
    "#55AB5D",
    "#71CBAB",
    "#78CDC4",
    "#90D45C",
    "#A7DDC2",
  ],
  "663097375557.jpg": [
    "#172A29",
    "#1E2927",
    "#23423C",
    "#2E5154",
    "#4C676F",
    "#567988",
    "#5B827D",
    "#62A3B4",
    "#688D9D",
    "#7295A8",
    "#89A6B5",
    "#9AB8C7",
    "#AFC9D6",
    "#BDC0B9",
    "#DBEBEC",
    "#E4E9EA",
  ],
  "663097618373.webp": [
    "#193252",
    "#1B1A36",
    "#1C486C",
    "#1D395C",
    "#234C67",
    "#255377",
    "#2E6C93",
    "#2F6D95",
    "#35849D",
    "#3988AF",
    "#488FB5",
    "#4C759C",
    "#54A9CD",
    "#6FCCE6",
    "#A5E5F2",
    "#AC4F6C",
  ],
  "663097618368.jpeg": [
    "#04050F",
    "#06152D",
    "#0D2E4F",
    "#1B4492",
    "#1C365B",
    "#1E2131",
    "#225A8B",
    "#224970",
    "#546D92",
    "#564557",
    "#639AC4",
    "#6B8DAE",
    "#A2B3C8",
    "#A6ACBA",
    "#B06858",
    "#DCD8D7",
  ],
  "663097618347.jpeg": [
    "#051304",
    "#122C0D",
    "#23391B",
    "#27521A",
    "#2C4D15",
    "#334E28",
    "#3B5F40",
    "#4F6E31",
    "#506428",
    "#5A7645",
    "#699031",
    "#70914B",
    "#94A955",
    "#A6C051",
    "#A8CF5E",
    "#C8D986",
  ],
  "663097375559.jpg": [
    "#0A0202",
    "#2A2C26",
    "#2E0504",
    "#4E0804",
    "#614B31",
    "#672B14",
    "#6F0B04",
    "#8D0F03",
    "#A02D07",
    "#A75617",
    "#AB653E",
    "#D0650B",
    "#E2AE46",
    "#E79C17",
    "#FAD965",
    "#FCF2B3",
  ],
  "663097618361.jpeg": [
    "#080811",
    "#0C142C",
    "#1D304D",
    "#222629",
    "#2D4960",
    "#4D2D2B",
    "#514639",
    "#546C8F",
    "#5C575F",
    "#788497",
    "#9A674E",
    "#B4ABB2",
    "#C4A960",
    "#D7B3AA",
    "#F1E0C6",
    "#F7E0B1",
  ],
  "663097618350.jpg": [
    "#06170F",
    "#0C2B13",
    "#0E2E2B",
    "#272C22",
    "#294B22",
    "#2B414F",
    "#4E6DB1",
    "#535827",
    "#57221F",
    "#585E58",
    "#6C8865",
    "#AC5A45",
    "#B27996",
    "#C3B1AA",
    "#CD9569",
    "#E99696",
  ],
  "663097375516.jpg": [
    "#0E0D13",
    "#191C2B",
    "#253555",
    "#283E82",
    "#35435B",
    "#354A71",
    "#395F8F",
    "#3B5887",
    "#4E6791",
    "#52658D",
    "#53536D",
    "#533637",
    "#7388A6",
    "#A16664",
    "#A69299",
    "#BC857A",
  ],
  "663097618349.jpeg": [
    "#0B1D18",
    "#0C2819",
    "#12302A",
    "#194736",
    "#235435",
    "#29554A",
    "#326559",
    "#346856",
    "#38884D",
    "#464B3D",
    "#467465",
    "#518975",
    "#6AA290",
    "#74C487",
    "#848072",
    "#A2CFBE",
  ],
  "663097618352.jpeg": [
    "#0C110F",
    "#192915",
    "#1A2827",
    "#212C18",
    "#28342E",
    "#2E3C42",
    "#35452E",
    "#374A4D",
    "#4D5730",
    "#546365",
    "#65788A",
    "#748BA0",
    "#77A0C3",
    "#8C9558",
    "#92A2AB",
    "#BECED8",
  ],
  "663097618364.jpeg": [
    "#050713",
    "#08172E",
    "#0B2D4D",
    "#153355",
    "#1C2531",
    "#1F4C68",
    "#256696",
    "#3E89AB",
    "#527792",
    "#534430",
    "#5F8FA5",
    "#60605A",
    "#778658",
    "#A86F53",
    "#B49362",
    "#CCBCB2",
  ],
  "663097375528.jpg": [
    "#160906",
    "#30120D",
    "#39241B",
    "#512F2A",
    "#521814",
    "#69403D",
    "#6E4F53",
    "#6F2E31",
    "#8C2F2C",
    "#9A5A52",
    "#A44D37",
    "#CE6541",
    "#DB8A47",
    "#F0C98A",
    "#F4A75D",
    "#FAD273",
  ],
  "663097375548.png": [
    "#0C1611",
    "#0E3124",
    "#215538",
    "#2B734F",
    "#2C9872",
    "#2E9D81",
    "#33A778",
    "#50B374",
    "#50B681",
    "#5C883D",
    "#64B97A",
    "#6FC37A",
    "#74C483",
    "#86BF7B",
    "#9CD192",
    "#D4E4B6",
  ],
  "663097618360.jpg": [
    "#0A140E",
    "#151D22",
    "#152509",
    "#192625",
    "#293130",
    "#291913",
    "#291B23",
    "#2C280E",
    "#374F49",
    "#39423B",
    "#50645B",
    "#54261D",
    "#5C8A77",
    "#659884",
    "#B09B96",
    "#BC3135",
  ],
  "663097618359.webp": [
    "#0D1728",
    "#152635",
    "#1B3343",
    "#2A1012",
    "#2C3A45",
    "#2E2D34",
    "#354754",
    "#562522",
    "#59403E",
    "#5D5758",
    "#768182",
    "#9F6A5A",
    "#A6553E",
    "#AF8573",
    "#DAA894",
    "#E19573",
  ],
  "663097618366.jpeg": [
    "#050710",
    "#061629",
    "#16344B",
    "#18252D",
    "#294F64",
    "#4A7389",
    "#583029",
    "#5B5863",
    "#6894A1",
    "#8F7B84",
    "#A39F9B",
    "#A75E49",
    "#D0AB66",
    "#DAB49A",
    "#E39F6B",
    "#F5D89A",
  ],
  "663097375546.png": [
    "#3428A6",
    "#411973",
    "#4A26C7",
    "#4B38B8",
    "#552397",
    "#684AB9",
    "#7150C2",
    "#9159B8",
    "#956FC4",
    "#AB6AB1",
    "#AC30A3",
    "#C54468",
    "#C889BB",
    "#D071A3",
    "#DE956C",
    "#F27693",
  ],
  "663097375214.png": [
    "#103E84",
    "#125889",
    "#133465",
    "#17242C",
    "#2A5267",
    "#40948D",
    "#5A615C",
    "#5E402D",
    "#668F66",
    "#9F5F2B",
    "#A09F59",
    "#B4C391",
    "#BC602C",
    "#D7C54A",
    "#E09927",
    "#F7E621",
  ],
  "663097375555.png": [
    "#283857",
    "#2A2129",
    "#33476B",
    "#395786",
    "#5A3B46",
    "#5B6C90",
    "#5B3435",
    "#624E5C",
    "#75433C",
    "#867C90",
    "#9D5D52",
    "#A24A38",
    "#B79D91",
    "#C9623F",
    "#E49A63",
    "#EAB863",
  ],
  "663097618353.jpeg": [
    "#0A1213",
    "#112D2B",
    "#192825",
    "#1A453A",
    "#1B6B5B",
    "#228B71",
    "#4C6A55",
    "#5D9E74",
    "#73A053",
    "#74B183",
    "#7E7A64",
    "#8CB984",
    "#92B277",
    "#A7CB89",
    "#D5E095",
    "#DAE5BF",
  ],
  "663097618346.png": [
    "#080E1C",
    "#0E1629",
    "#1A304F",
    "#1C4571",
    "#263556",
    "#271F31",
    "#284971",
    "#2F6598",
    "#4B92C4",
    "#556E9B",
    "#5E3D56",
    "#5E222F",
    "#9B2B34",
    "#C84648",
    "#CAAFA8",
    "#F6AF68",
  ],
  "663097618365.jpeg": [
    "#03060E",
    "#03162D",
    "#062636",
    "#0A314B",
    "#203451",
    "#214D65",
    "#2A678C",
    "#2B2123",
    "#56606D",
    "#57332C",
    "#5A7589",
    "#628B9A",
    "#877A7F",
    "#A45C4A",
    "#CAB89B",
    "#D7A860",
  ],
  "663097375558.jpg": [
    "#11161A",
    "#131D22",
    "#162C30",
    "#203C43",
    "#24565B",
    "#262119",
    "#293131",
    "#2D4B4F",
    "#34433B",
    "#4C3627",
    "#529899",
    "#585F58",
    "#5D4A35",
    "#906C4A",
    "#9DA697",
    "#AE926A",
  ],
  "663097736686.jpeg": [
    "#07080F",
    "#181D2C",
    "#235E8E",
    "#265273",
    "#2A6B96",
    "#3B85A4",
    "#3C3F4A",
    "#3E6EC4",
    "#547295",
    "#5C8EA8",
    "#8E7B96",
    "#9B5D4E",
    "#9D9DAE",
    "#CDB5BB",
    "#D0906A",
    "#E9D6D3",
  ],
  "663097618356.jpeg": [
    "#060E1C",
    "#08162D",
    "#0D2832",
    "#0D2A4B",
    "#1C2C58",
    "#1F63D7",
    "#224EA9",
    "#2A242C",
    "#35AFEB",
    "#4A3F50",
    "#4B4E9C",
    "#B1669E",
    "#B5484C",
    "#DC8FA0",
    "#E3B14C",
    "#E66057",
  ],
  "663097375561.jpg": [
    "#082D10",
    "#0A1A26",
    "#0B1413",
    "#0F2D2E",
    "#1F5324",
    "#245652",
    "#2A2E28",
    "#2B3739",
    "#4C9EA1",
    "#519B36",
    "#545531",
    "#566658",
    "#62995F",
    "#72705F",
    "#A3B662",
    "#B6D1A5",
  ],
  "663097618371.jpeg": [
    "#0E1D16",
    "#112C17",
    "#15332B",
    "#224D2D",
    "#27544D",
    "#31665C",
    "#3F6833",
    "#45796D",
    "#468543",
    "#4F8676",
    "#508181",
    "#649D95",
    "#65A7A3",
    "#87BAB4",
    "#A8D2CF",
    "#BFDED8",
  ],
  "663097618355.jpeg": [
    "#172526",
    "#182A33",
    "#203944",
    "#304D50",
    "#385E63",
    "#394F33",
    "#4E716F",
    "#4F6957",
    "#678A70",
    "#6E988E",
    "#708734",
    "#789777",
    "#90B19F",
    "#AFCCB2",
    "#BED6BC",
    "#CDE2CA",
  ],
  "663097618144.png": [
    "#081431",
    "#0D2959",
    "#110F21",
    "#214FA4",
    "#5469C6",
    "#593D62",
    "#5B54A3",
    "#7481DE",
    "#9275B5",
    "#9D74C9",
    "#A66BA6",
    "#CDA8C5",
    "#E0719F",
    "#E46269",
    "#EC8DAA",
    "#FEB56B",
  ],
  "663097375545.png": [
    "#1C1B22",
    "#2E262E",
    "#355068",
    "#44374A",
    "#595B6C",
    "#592C31",
    "#5B7487",
    "#708B98",
    "#8D7B83",
    "#9B332E",
    "#9F6766",
    "#C35540",
    "#C7B199",
    "#DF5436",
    "#E5B873",
    "#E99A6C",
  ],
  "663097618363.jpeg": [
    "#040713",
    "#05142C",
    "#082A34",
    "#0A324B",
    "#1D3453",
    "#1F4D62",
    "#272A29",
    "#2F6A91",
    "#4F4630",
    "#5B625D",
    "#5C98AC",
    "#738868",
    "#9C6B51",
    "#A39A65",
    "#C4C4B1",
    "#D0B568",
  ],
  "663097375549.png": [
    "#040B08",
    "#102719",
    "#14302F",
    "#1F3C44",
    "#294F2E",
    "#2B4F50",
    "#36605B",
    "#457335",
    "#47734E",
    "#49746F",
    "#5D8970",
    "#709990",
    "#78A679",
    "#8EB2A4",
    "#ABCAB6",
    "#C5DCC8",
  ],
  "663097375556.png": [
    "#2B5E9F",
    "#403643",
    "#5D2F23",
    "#5E6E94",
    "#65A1C9",
    "#67525F",
    "#6890B2",
    "#7C827E",
    "#8F788B",
    "#9D6962",
    "#A1999E",
    "#B46039",
    "#B9BFB9",
    "#DFA567",
    "#DF9C63",
    "#F2D798",
  ],
  "663097618362.jpeg": [
    "#070B11",
    "#081928",
    "#0A2C36",
    "#0A3546",
    "#284F5B",
    "#2A2929",
    "#2A3748",
    "#513E2D",
    "#586160",
    "#637F85",
    "#9D6B47",
    "#A79A5F",
    "#C7B099",
    "#D2A849",
    "#E0A65F",
    "#EFCEA8",
  ],
};

const [width, height] = os.ttyGetWinSize();
const colorPreviewWindow = Math.floor(width / 2) - 1;

const fzfArgs = [
  "fzf", // Launch fzf command
  "--ansi", // Enable ANSI color sequences
  "--read0", // Use null-terminated strings for input
  '--delimiter=" "', // Set delimiter for separating data
  ...["--with-nth", "1"], // Configure last columns to display in the fuzzy search
  '--preview="echo -e {} | tail -n +2"', // Preview command to show App's description
  '--preview-window="wrap,border-none"',
  "--layout=reverse", // Reverse layout
  "--no-info",
];

const fzfInput = Object.entries(colors).map(([wallpaperName, pallete]) =>
  wallpaperName.concat(
    " ", // --delimiter
    JSON.stringify(
      pallete
        .map((color) =>
          Array(Math.floor(height / pallete.length) || 2)
            .fill(
              ansi.bgHex(color).concat(
                ansi.hex(color),
                "-".repeat(colorPreviewWindow),
              ),
            )
            .join("\n")
        )
        .join("\n").slice(0, -1),
    ),
  )
).join("\0");

const filter = new ProcessSync(
  fzfArgs, // Arguments for the fzf command
  {
    input: fzfInput, // Pass the formatted options as input to fzf
    useShell: true, // Allow the use of shell commands in the fzf command
  },
);

// Run the fzf process and check for success
if (filter.run() && filter.success) {
}
